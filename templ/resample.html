<div class="title-block">
  <a href="/resample.html">
	<div class="title-image">
	  <img src="{{{logo_small}}}" alt="{{{brand_name}}} {{{logo_small_alt}}}" 
		   width="{{{logo_small_width}}}" height="{{{logo_small_height}}}" />
	</div>
  </a>
  <div class="title">{{{title}}}</div>
</div>

<div>

<p>The Squeezelite Player appliction used by your device is capable of upsampling the audio data it is playing using 
<a href="http://sourceforge.net/projects/soxr/" target="blank_">the SoX Resampler library</a>, libsoxr.  This may be used to upsample the audio stream before sending it to the audio output hardware.  Depending on the DAC hardware this may improve the quality of the audio output.</p>

<h3><span id="Options">Options</span></h3>
<p>The Squeezelite &quot;-h&quot; option displays the resampling option parameters supported by the &quot;-R&quot; reample option (previous &quot;-u&quot; Upsample option).
</p>
<pre>
Resample, params = &lt;recipe&gt;:&lt;flags&gt;:&lt;attenuation&gt;:&lt;precision&gt;:&lt;passband_end&gt;:&lt;stopband_start&gt;:&lt;phase_response&gt;,
 recipe = (v|h|m|l|q)(L|I|M)(s) [E|X], E = exception - resample only if native rate not supported, X = async - resample to max rate for device, otherwise to max sync rate
 flags = num in hex,
 attenuation = attenuation in dB to apply (default is -1db if not explicitly set),
 precision = number of bits precision (NB. HQ = 20. VHQ = 28),
 passband_end = number in percent (0dB pt. bandwidth to preserve. nyquist = 100%),
 stopband_start = number in percent (Aliasing/imaging control. > passband_end),
 phase_response = 0-100 (0 = minimum / 50 = linear / 100 = maximum)
</pre>
<p>If resampling is enabled, but no resampling parameters are specified, a default set of resampling options will be used. 
For most users the defaults will be fine. Before changing them you are advised to read the sox manual page and pay specific attention to the &quot;rate&quot; option and its arguments.
</p>
<p>Enabling resampling is without any additional arguments, is the equivalent to having specified &quot;hL&quot;.
</p>

<h3><span id="quality">&lt;recipe&gt;</span></h3>
<p>The first optional argument allows the specification of &lt;recipe&gt; flags used by the SoX library.</p>

<h5>Quality</h5>
<p>The &quot;v|h|m|l|q&quot; arguments are mutually exclusive and specify different qualities of resampling. It is recommended that only the &quot;h&quot;, which is high quality (and the default if not specified) and &quot;v&quot;, which is very high quality are used.
</p>

<h5>Filter (Phase response)</h5>
<p>&quot;L|I|M&quot; are mutually exclusive filter options. The default filter if not specified is linear, &quot;L&quot;. 
The minimum phase filter can be selected with &quot;M&quot; and an intermediate filter selected with &quot;I&quot;. 
</p>

<h5>Filter (Bandwidth)</h5>
<p>The &quot;s&quot; argument to the quality option is the equivalent of having specified the &quot;-s&quot; option to 
the SoX rate effect. ie. it preserves 99% bandwidth with a steep cut-off.
</p>

<h5>Examples</h5>
<p>&quot;vLs&quot;, would use very high quality setting, linear phase filter and steep cut-off.
</p>
<p>
&quot;hM&quot;, would specify high quality, with the minimum phase filter.
</p>
<p>
&quot;hMX&quot;, would specify high quality, with the minimum phase filter, async upsampling to max device rate.
</p>

<h5>Asychronous Resampling</h5>
<p>The &quot;X&quot; option can also be specified to enable asynchronous resampling.  When used this resamples to the maximum rate specified for the device rather than the default of resampling to the maximum sychronous rate to the original sample rate.
</p>

<h5>Resampling by Exception</h5>
<p>The &quot;E&quot; option can also be specified to enable resampling by exception.  When used this only reasamples if the sample rate of the track being played is not supported by a native sample rate of the device (or one specified by the Rate settings.)
</p>

<h3><span id="flags">&lt;flags&gt;</span></h3>
<p>The second optional argument allows the user to specify the following arguments, (taken from the soxr.h header file),
in hex, on the command line.
</p>
<pre>#define SOXR_ROLLOFF_SMALL     0u  /* &lt;= 0.01 dB */
#define SOXR_ROLLOFF_MEDIUM    1u  /* &lt;= 0.35 dB */
#define SOXR_ROLLOFF_NONE      2u  /* For Chebyshev bandwidth. */

#define SOXR_MAINTAIN_3DB_PT   4u  /* Reserved for internal use. */
#define SOXR_HI_PREC_CLOCK     8u  /* Increase 'irrational' ratio accuracy. */
#define SOXR_DOUBLE_PRECISION 16u  /* Use D.P. calcs even if precision &lt;= 20. */
#define SOXR_VR               32u  /* Experimental, variable-rate resampling. */
</pre>

<h5>Examples</h5>
<p>&quot;:2&quot;, would specify SOXR_ROLLOFF_NONE.
<p>NB. In the example above, the option string begining with a &quot;:&quot;. ie. the first option, &lt;quality&gt;, has not 
been user specified, so would default to &quot;hL&quot;. So specifying &quot;:2&quot; is the same as having specified 
&quot;hL:2&quot;.
</p>

<h3><span id="attenuation">&lt;attenuation&gt;</span></h3>
<p>Internally, data is passed to the SoX resample process as 32 bit integers and output from the SoX resample process as
32 bit integers. Once resampled it is possible that integer samples may be clipped. (ie. exceed the maximum value). If you do not not specify an &quot;attenuation&quot; value it will default to -1db. A value of &quot;0&quot; will disable the default -1db attenuation being applied.  
</p>
<p>Clipped samples will be logged in the log file if.
</p>

<h5>Examples</h5>
<p>&quot;::6&quot;, specifies to apply -6db (ie. halve volume) prior to the resampling process.
</p>

<h3>Advanced options</h3>
<p>The following options are advanced.
</p>

<h3><span id="precision">&lt;precision&gt;</span></h3>
<p>The internal 'bit' precision used in the re-sample calculations. (ie. quality.)
</p>

<h5>Examples</h5>
<p>&quot;:::28&quot;, specifies 28 bit precision.
</p>

<h3><span id="passband_end">&lt;passband_end&gt;</span></h3>
<p>A percentage value between 0 and 100, where 100 is the Nyquist frequency. (Default if not explicitly set, 91.3.)
</p>

<h5>Examples</h5>
<p>&quot;::::98&quot;, specifies passband ends at 98 percent of Nyquist.
</p>

<h3><span id="stopband_start">&lt;stopband_start&gt;</span></h3>
<p>A percentage value between 0 and 100, where 100 is the Nyquist frequency. (Default if not explicitly set, 100.)
</p>

<h5>Examples</h5>
<p>&quot;:::::100&quot;, specifies stopband start at Nyquist.
</p>

<h3><span id="phase_response">&lt;phase_response&gt;</span></h3>
<p>A value between 0-100, where &quot;0&quot; is equivalent to the recipe &quot;M&quot; flag for minimum phase, 
&quot;25&quot; is equivalent to the recipe &quot;I&quot; flag for intermediate phase and &quot;50&quot; is equivalent 
to the recipe &quot;L&quot; flag for linear phase.
</p>

<h5>Examples</h5>
<p>&quot;::::::50&quot;, specifies linear phase.
</p>
